{
  "$id": "https://json-schema.org/draft/2020-12/schema",
  "description": "A schema defining the domains.json file expected by the DynaPork Dynamic DNS Client",
  "type": "object",
  "properties": {
    "$schema": { "type": "string" },
    "interval": {
      "type": "integer",
      "description": "The time between checks for IP Address changes, in milliseconds, minimum 1000",
      "exclusiveMinimum": 999
    },
    "records": {
      "type": "array",
      "description": "The dns records to be maintained by this client",
      "minItems": 1,
      "items": {
        "type": "object",
        "properties": {
          "domainName": {
            "type": "string",
            "description": "The domain name, e.g. website.ext"
          },
          "subdomain": {
            "type": "string",
            "description": "An optional subdomain, e.g. service.website.ext. If not specified, defaults to root record."
          },
          "recordType": {
            "enum": [
              "A",
              "MX",
              "CNAME",
              "ALIAS",
              "TXT",
              "NS",
              "AAAA",
              "SRV",
              "TLSA",
              "CAA"
            ],
            "description": "The type of DNS record to maintain, e.g. A, MX, CNAME, etc."
          },
          "ttl": {
            "type": "integer",
            "exclusiveMinimum": 599,
            "description": "The Time-To-Live of the record, minimum 600 seconds."
          },
          "prio": {
            "type": "integer",
            "exclusiveMinimum": -1,
            "description": "The priority of the record, for records accepting a priority e.g. MX records."
          }
        },
        "required": ["domainName", "recordType"]
      }
    }
  },
  "required": ["interval", "records"],
  "additionalProperties": false
}
